var ARFPluginFloat=function(n){"use strict";var t,e,o,i;!function(n){n.BANNER="banner",n.NATIVE="native",n.VIDEO="video",n.POPUP="popup",n.FLOAT="float"}(t||(t={})),function(n){n.ON_LOAD="on_load",n.ON_DELAY="delay",n.ON_SCROLL="scroll",n.ON_CLICK="click",n.ON_INACTIVITY="inactivity"}(e||(e={})),function(n){n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n.BOTTOM_CENTER="bottom-center",n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.TOP_CENTER="top-center",n.CENTER_LEFT="center-left",n.CENTER_RIGHT="center-right"}(o||(o={})),function(n){n.IMPRESSION="impression",n.CLICK="click",n.ERROR="error"}(i||(i={}));class a{constructor(){this.endpoint="http://113.161.103.134:8096/api/v1/tracking/events/codec.gif"}t(n){const{campaignId:t,context:e,creativeInfo:o,inventId:a,transactionId:r,unit:c,userId:s}=n,d=this.o({cr:null==o?void 0:o.creativeId,ad_type:"OUTSTREAM",event:i.IMPRESSION,transaction_id:r,ev_context:e,user_id:s,unit:c,cp:t,iv:a}),l=`${this.endpoint}?${d}`;(new Image).src=l}i(n){const{campaignId:t,context:e,creativeInfo:o,inventId:a,transactionId:r,unit:c,userId:s,url:d}=n,l=this.o({cr:null==o?void 0:o.creativeId,ad_type:"OUTSTREAM",event:i.CLICK,transaction_id:r,ev_context:e,user_id:s,unit:c,cp:t,iv:a,url:d});return`${this.endpoint}?${l}`}uuid(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,n=>{const t=16*Math.random()|0;return("x"===n?t:3&t|8).toString(16)})}o(n){return Object.entries(n).map(([n,t])=>`${encodeURIComponent(n)}=${encodeURIComponent(t)}`).join("&")}}return window.AdTracking=new a,n.Position=void 0,function(n){n.BOTTOM_LEFT="bottom-left",n.BOTTOM_RIGHT="bottom-right",n.BOTTOM_CENTER="bottom-center",n.TOP_LEFT="top-left",n.TOP_RIGHT="top-right",n.TOP_CENTER="top-center",n.CENTER_LEFT="center-left",n.CENTER_RIGHT="center-right"}(n.Position||(n.Position={})),window._arfPlugins=window._arfPlugins||{},window._arfPlugins.float=function({campaignId:t,creativeInfo:e,slotId:o,transactionId:i,eventContext:r,unit:c,userId:s,options:d}){if(!d)return;const l=d,p=!1!==l.closeButton,f=l.position||n.Position.BOTTOM_RIGHT,x=l.zIndex||999999,u=l.autoHide;let m=e.width||300,b=e.height||200;if(l.size&&"string"==typeof l.size){const[n,t]=l.size.split("x").map(Number);n&&t&&(m=n,b=t)}!function(){var d;const l=function(){const t=document.createElement("iframe");t.src="about:blank",window._arfFloatCount=window._arfFloatCount||{};const e=window._arfFloatCount,o=e[f]||0;e[f]=o+1;const i=o*(b+4);let a="";switch(f){case n.Position.BOTTOM_LEFT:a=`bottom:${i}px; left:0;`;break;case n.Position.BOTTOM_RIGHT:a=`bottom:${i}px; right:0;`;break;case n.Position.BOTTOM_CENTER:a=`bottom:${i}px; left:50%; transform: translateX(-50%);`;break;case n.Position.TOP_LEFT:a=`top:${i}px; left:0;`;break;case n.Position.TOP_RIGHT:a=`top:${i}px; right:0;`;break;case n.Position.TOP_CENTER:a=`top:${i}px; left:50%; transform: translateX(-50%);`;break;case n.Position.CENTER_LEFT:a=`top:calc(50% + ${i/2}px); left:0; transform: translateY(-50%);`;break;case n.Position.CENTER_RIGHT:a=`top:calc(50% + ${i/2}px); right:0; transform: translateY(-50%);`}return t.style.cssText=`\n      position: fixed;\n      ${a}\n      width: ${m}px;\n      height: ${b}px;\n      border: none;\n      z-index: ${x};\n      background: transparent;\n      transition: opacity 0.3s ease;\n    `,document.body.appendChild(t),t}(),g=l.contentDocument||(null===(d=l.contentWindow)||void 0===d?void 0:d.document);if(!g)return;const h=(new a).i({campaignId:t,context:r,creativeInfo:e,inventId:o,transactionId:i,unit:c,userId:s,url:e.ldp}),v=`\n      <html>\n        <head>\n          <style>\n            body {\n              margin: 0;\n              padding: 0;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              background: transparent;\n              font-family: sans-serif;\n            }\n\n            .float {\n              width: ${m}px;\n              height: ${b}px;\n              background: #fff;\n              overflow: hidden;\n              box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);\n              position: relative;\n              opacity: 0;\n              animation: fadeIn 0.4s ease forwards;\n            }\n\n            .float.closing {\n              animation: fadeOut 0.4s ease forwards;\n            }\n\n            @keyframes fadeIn {\n              from { opacity: 0; }\n              to { opacity: 1; }\n            }\n\n            @keyframes fadeOut {\n              from { opacity: 1; }\n              to { opacity: 0; }\n            }\n\n            .close-btn {\n              position: absolute;\n              top: 4px;\n              right: 4px;\n              width: 26px;\n              height: 26px;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              font-size: 22px;\n              color: #fff;\n              background: #000;\n              border-radius: 6px;\n              cursor: pointer;\n              z-index: 10;\n              transition: opacity 0.2s ease;\n            }\n\n            .close-btn:hover {\n              opacity: 0.8;\n            }\n\n            a.banner {\n              display: block;\n              width: 100%;\n              height: 100%;\n              background: url('${e.content_url}') center/cover no-repeat;\n            }\n          </style>\n        </head>\n        <body>\n          <div class="float">\n            ${p?'<div class="close-btn">&times;</div>':""}\n            <a class="banner" href="${h}" target="_blank"></a>\n          </div>\n        </body>\n        <script src="https://cdn.jsdelivr.net/gh/datcaoquoc/codecsdk@v1.0.7/dist/plugin-codeclogo.min.js"><\/script>\n      </html>\n    `;g.open(),g.write(v),g.close(),(new a).t({campaignId:t,context:r,creativeInfo:e,inventId:o,transactionId:i,unit:c,userId:s}),l.onload=()=>{const n=g.querySelector(".close-btn"),t=g.querySelector(".float"),e=()=>{t?(t.classList.add("closing"),setTimeout(()=>{o()},400)):o()},o=()=>{document.body.removeChild(l),window._arfFloatCount[f]=Math.max(0,(window._arfFloatCount[f]||1)-1)};n&&n.addEventListener("click",e),u&&t&&setTimeout(e,1e3*u)}}()},n}({});
