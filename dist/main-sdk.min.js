!function(){"use strict";class t{static t(t="codec_user_id"){let n=(t=>{const n=document.cookie.match(new RegExp("(^| )"+t+"=([^;]+)"));return n?decodeURIComponent(n[2]):null})(t);return n||(n=this.i(),((t,n,e=365)=>{const i=new Date(Date.now()+864e5*e).toUTCString();document.cookie=`${t}=${encodeURIComponent(n)}; expires=${i}; path=/; Secure; SameSite=Lax`})(t,n)),n}static i(){if("undefined"!=typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint8Array(16));t[6]=15&t[6]|64,t[8]=63&t[8]|128;const n=[...t].map(t=>t.toString(16).padStart(2,"0")).join("");return`${n.slice(0,8)}-${n.slice(8,12)}-${n.slice(12,16)}-${n.slice(16,20)}-${n.slice(20)}`}static o(){const t=navigator.userAgent;return t.includes("Win")?"Windows":t.includes("Mac")?"MacOS":t.includes("Linux")?"Linux":/Android/i.test(t)?"Android":/iPhone|iPad|iPod/i.test(t)?"iOS":"Unknown"}static u(){const t=navigator.userAgent;return/Mobi|Android/i.test(t)?"mobile":/Tablet|iPad/i.test(t)?"tablet":"desktop"}static l(){return{type:this.u(),os:this.o(),ua:navigator.userAgent,language:navigator.language,screen:{width:window.screen.width,height:window.screen.height},viewport:{width:window.innerWidth,height:window.innerHeight,dpr:window.devicePixelRatio||1}}}static v(){return{url:window.location.href,ref:document.referrer||null}}static p(t){return{page:this.v(),slot:t,device:this.l(),userId:this.t()}}}!function(n,e){function i(){const t=n.h;if(!t.length)return;let e;for(;e=t.shift();)o(e.zone)}function o(n,i){!async function(n){var i;const o=t.p({id:n});try{const t=await fetch("http://113.161.103.134:8097/api/v1/ad-sever/ads/inventory/outstream/creative-v2",{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*","Accept-Language":"en-US,en;q=0.9,vi;q=0.8"},body:JSON.stringify(o)}),n=await t.json();if(n.success&&201===n.code&&(null===(i=n.data)||void 0===i?void 0:i.src)){const t=e.createElement("script");t.text=n.data.src,e.head.appendChild(t),t.remove()}}catch(t){}}(n)}n.m=!0,n.h=n.h||[],n.I=n.I||{},n.sspcallback=function(t){var i,o;const r=null===(i=t.data)||void 0===i?void 0:i[0],c=null===(o=null==r?void 0:r.creatives)||void 0===o?void 0:o[0];if(!t.formatType)throw new Error("lỗi k có format");c&&function(t,i){if(n.I[t])return void i();const o=e.createElement("script");o.src=`./dist/plugin-${t}.js`,o.async=!0,o.onload=()=>{i()},o.onerror=()=>{},e.head.appendChild(o)}(t.formatType,()=>{const e=n.I[t.formatType];"function"==typeof e&&e({campaignId:r.campaignId,creativeInfo:c,slotId:null==t?void 0:t.slotId,transactionId:null==t?void 0:t.transactionId,eventContext:null==t?void 0:t.eventContext,unit:t.unit,userId:t.userId,options:t.ext.options})})},i(),new MutationObserver(i).observe(e.documentElement,{childList:!0,subtree:!0}),n.S=i}(window,document)}();
